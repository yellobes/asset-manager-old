<!-- -1GTI -->
{% if page %}
<table class="table-border">
    <tr>
        <td>Photo</td>
        <td>Asset Code</td>
        <td>Make</td>
        <td>Model</td>
        <td>Description</td>
        <td>Checked Out To</td>
        <td>Modify</td>
    </tr>
{% endif %}
{% for result in page %}
    {% if not result.object.title %}
        <tr class="fade">
            <td>
            {% if result.object.photo %}
              <img class="asset-icon" src="/m/{{ result.object.photo }}" />
            {% endif %}
            </td>
            <td>{{ result.object.asset_code }}</td>
            <td>{{ result.object.make }}</td>
            <td>{{ result.object.model }}</td>
            <td>{{ result.object.description|truncatewords:25 }}</td>
            <td>
            {% if result.checkout_info %}
            <form action='{% url killObject 'checkout' result.checkout_info.id %}'
                method="post">
                {% csrf_token %}
                <input type='hidden' name='delete' value='delete' />
                <input type="submit" value="Check In"></input>
            </form>
            </td>
            {% else %}
            <form action="{% url newObject 'checkout' %}" method="get">
                <input type="hidden" name="asset_id" value="{{ result.object.id }}">
                <input type="submit" value="Check Out">
            </form>
            </td>
            
            {% endif %}
            <td>
            <input type="button"
            onclick="location.href='{% url assetElement 'asset' result.object.id %}';"value="modify"></input>
            </td>
        </td>
      </tr>

    {% endif %}
{% empty %}
    <p>No results found. <br />&nbsp;<b><em><a href="/help/searching">need help?</a></em></b></p>
    
    {% endfor %}
</table>
<script type="text/javascript">
  // Set everything up
  $(document).ready(function(){
      $('.asset-icon').width('50px');
      window.icon = [];
      $('.asset-icon').last().each(function(){
        window.icon.margintop = $(this).css('margin-top');
        window.icon.width = $(this).width();
        window.icon.height = $(this).width();
      });
  });

  // Animate the tables icons
  $('.asset-icon').mouseenter(function(){
    $(this).animate({
      'margin-top': '-'+window.icon.margintop,
      width: (window.icon.width * 1.5),
      height: (window.icon.height * 1.5),
      }, 50
    );
  });

  // Animate the tables icons
  $('.asset-icon').mouseleave(function(){
      $(this).animate({
      'margin-top': window.icon.margintop,
      width: window.icon.width,
      height: window.icon.height,
    }, 50);
  });
</script>
